!function e(t,s,n){function a(r,o){if(!s[r]){if(!t[r]){var c="function"==typeof require&&require;if(!o&&c)return c(r,!0);if(i)return i(r,!0);var l=new Error("Cannot find module '"+r+"'");throw l.code="MODULE_NOT_FOUND",l}var u=s[r]={exports:{}};t[r][0].call(u.exports,function(e){var s=t[r][1][e];return a(s?s:e)},u,u.exports,e,t,s,n)}return s[r].exports}for(var i="function"==typeof require&&require,r=0;r<n.length;r++)a(n[r]);return a}({1:[function(e,t,s){"use strict";var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},a={ENTER:13,TAB:9,BACKSPACE:8,UP_ARROW:38,DOWN_ARROW:40,ESCAPE:27},i={TAG:"tag"},r=React.createClass({displayName:"Tag",mixins:[ReactDND.DragDropMixin],propTypes:{onDelete:React.PropTypes.func.isRequired,tag:React.PropTypes.object.isRequired,moveCard:React.PropTypes.func.isRequired},statics:{configureDragDrop:function(e){e(i.TAG,{dragSource:{beginDrag:function(e){return{item:{id:e.props.tag.id}}}},dropTarget:{over:function(e,t){e.props.moveTag(t.id,e.props.tag.id)}}})}},render:function(){this.getDragState(i.TAG).isDragging;return React.createElement("span",n({className:"tag"},this.dragSourceFor(i.TAG),this.dropTargetFor(i.TAG)),this.props.tag.text,React.createElement("a",{className:"remove",onClick:this.props.onDelete},"x"))}});React.createClass({displayName:"Tags",componentDidMount:function(){this.refs.input.getDOMNode().focus()},getInitialState:function(){return{tags:this.props.tags,suggestions:this.props.suggestions,query:"",selectedIndex:-1,selectionMode:!1}},handleDelete:function(e,t){var s=this.state.tags;s.splice(e,1),this.setState({tags:s,query:""})},markIt:function(e,t){var s=t.trim().replace(/[-\\^$*+?.()|[\]{}]/g,"\\$&"),n=RegExp(s,"gi");return{__html:e.replace(n,"<mark>$&</mark>")}},handleChange:function(e){var t=e.target.value.trim(),s=this.props.suggestions.filter(function(e){return 0===e.toLowerCase().search(t.toLowerCase())});this.setState({query:t,suggestions:s})},handleKeyDown:function(e){var t=this.state.tags,s=(this.refs.input.getDOMNode(),this.state.query),n=this.state.selectedIndex,i=this.state.suggestions;if(e.keyCode===a.ESCAPE&&(e.preventDefault(),this.setState({selectedIndex:-1,selectionMode:!1,suggestions:[]})),e.keyCode!==a.ENTER&&e.keyCode!==a.TAB||""==s||(e.preventDefault(),this.state.selectionMode&&(s=this.state.suggestions[this.state.selectedIndex]),this.addTag(s)),e.keyCode===a.BACKSPACE&&""==s&&this.handleDelete(t.length-1),e.keyCode===a.UP_ARROW){e.preventDefault();var n=this.state.selectedIndex;this.setState(0>=n?{selectedIndex:this.state.suggestions.length-1,selectionMode:!0}:{selectedIndex:n-1,selectionMode:!0})}e.keyCode===a.DOWN_ARROW&&(e.preventDefault(),this.setState({selectedIndex:(this.state.selectedIndex+1)%i.length,selectionMode:!0}))},addTag:function(e){var t=this.state.tags,s=this.refs.input.getDOMNode();t.push({id:t.length+1,text:e}),this.setState({tags:t,query:"",selectionMode:!1,selectedIndex:-1}),s.value="",s.focus()},handleSuggestionClick:function(e,t){this.addTag(this.state.suggestions[e])},handleSuggestionHover:function(e,t){this.setState({selectedIndex:e,selectionMode:!0})},moveTag:function(e,t){var s=this.state.tags,n=s.filter(function(t){return t.id===e})[0],a=s.filter(function(e){return e.id===t})[0],i=s.indexOf(n),r=s.indexOf(a);s.splice(i,1),s.splice(r,0,n),this.setState({tags:s})},render:function(){var e=this.state.tags.map(function(e,t){return React.createElement(r,{tag:e,onDelete:this.handleDelete.bind(this,t),moveTag:this.moveTag})}.bind(this)),t=this.state.query.trim(),s=this.state.selectedIndex,n=[];return t.length>1&&(n=this.state.suggestions.map(function(e,n){return React.createElement("li",{key:n,onClick:this.handleSuggestionClick.bind(this,n),onMouseOver:this.handleSuggestionHover.bind(this,n),className:n==s?"active":""},React.createElement("span",{dangerouslySetInnerHTML:this.markIt(e,t)}))}.bind(this))),React.createElement("div",{className:"tags"},React.createElement("div",{className:"selected-tags"},e),React.createElement("div",{className:"tagInput"},React.createElement("input",{ref:"input",type:"text",placeholder:"Add new country",onChange:this.handleChange,onKeyDown:this.handleKeyDown}),React.createElement("div",{className:"suggestions"},n.length>0?React.createElement("ul",null," ",n," "):"")),React.createElement("pre",null," ",React.createElement("code",null," ",JSON.stringify(this.state.tags,null,2)," ")," "))}})},{}]},{},[1]);
